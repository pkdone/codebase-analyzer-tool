<% if (jobsData && jobsData.jobs.length > 0) { %>
  <div class="jobs-summary">
    <p class="stats">
      <strong>Total Jobs:</strong> <%= jobsStats.total %> |
      <strong>Trigger Types:</strong> <%= jobsStats.triggerTypesCount %> |
      <strong>Script Files:</strong> <%= jobsStats.jobFilesCount %>
    </p>
    <% if (jobsData.triggerTypes.length > 0) { %>
      <p class="trigger-types">
        <strong>Trigger Types Found:</strong> <%= jobsData.triggerTypes.join(', ') %>
      </p>
    <% } %>
  </div>

  <table class="data-table jobs-table">
    <thead>
      <tr>
        <th>Job Name</th>
        <th>Source File</th>
        <th>Trigger</th>
        <th>Purpose</th>
        <th>Input Resources</th>
        <th>Output Resources</th>
      </tr>
    </thead>
    <tbody>
      <% jobsData.jobs.forEach(function(job) { %>
        <tr>
          <td class="job-name"><strong><%= job.jobName %></strong></td>
          <td class="job-file" title="<%= job.sourceFile %>">
            <%= job.sourceFile.split('/').pop() %>
          </td>
          <td class="job-trigger">
            <span class="badge badge-trigger"><%= job.trigger %></span>
          </td>
          <td class="job-purpose"><%= job.purpose %></td>
          <td class="job-resources">
            <% if (job.inputResources && job.inputResources.length > 0) { %>
              <ul class="resource-list">
                <% job.inputResources.forEach(function(resource) { %>
                  <li><%= resource %></li>
                <% }); %>
              </ul>
            <% } else { %>
              <span class="no-data-cell">None</span>
            <% } %>
          </td>
          <td class="job-resources">
            <% if (job.outputResources && job.outputResources.length > 0) { %>
              <ul class="resource-list">
                <% job.outputResources.forEach(function(resource) { %>
                  <li><%= resource %></li>
                <% }); %>
              </ul>
            <% } else { %>
              <span class="no-data-cell">None</span>
            <% } %>
          </td>
        </tr>
        <% if (job.dependencies && job.dependencies.length > 0) { %>
          <tr class="dependencies-row">
            <td colspan="6">
              <div class="dependencies-info">
                <strong>Dependencies:</strong> <%= job.dependencies.join(', ') %>
              </div>
            </td>
          </tr>
        <% } %>
      <% }); %>
    </tbody>
  </table>
<% } else { %>
  <p class="no-data">No scheduled jobs or batch processes were found in this project.</p>
<% } %>

<style>
  .jobs-summary { 
    margin: 0 0 0.5rem 0; 
    padding: 0.75rem 1rem; 
    background: #f5f5f5; 
    border-radius: 4px; 
  }
  .jobs-summary .stats {
    margin: 0 0 0.5rem 0;
  }
  .jobs-summary .trigger-types {
    margin: 0;
    font-size: 0.95rem;
    color: #666;
  }
  .jobs-table td { 
    vertical-align: top; 
    padding: 0.75rem 0.5rem;
  }
  .job-name { 
    font-weight: bold; 
    color: #0066cc;
  }
  .job-file {
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    color: #666;
  }
  .job-trigger {
    text-align: center;
  }
  .job-purpose {
    max-width: 300px;
    line-height: 1.4;
  }
  .job-resources {
    min-width: 150px;
  }
  .resource-list {
    list-style-type: disc;
    margin: 0;
    padding-left: 1.25rem;
    font-size: 0.9rem;
  }
  .resource-list li {
    margin-bottom: 0.25rem;
    line-height: 1.3;
  }
  .no-data-cell {
    color: #999;
    font-style: italic;
    font-size: 0.9rem;
  }
  .badge-trigger { 
    padding: 0.25rem 0.6rem; 
    border-radius: 3px; 
    font-size: 0.85rem;
    background: #17a2b8; 
    color: white;
    white-space: nowrap;
    display: inline-block;
  }
  .dependencies-row {
    background: #f9f9f9;
    border-top: none;
  }
  .dependencies-info {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
    color: #555;
  }
  .dependencies-info strong {
    color: #333;
  }
</style>

