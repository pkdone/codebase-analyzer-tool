<% if (bomData && bomData.length > 0) { %>
  <div class="bom-summary">
    <p class="stats">
      <strong>Total Dependencies:</strong> <%= bomStats.total %> |
      <strong>Version Conflicts:</strong> 
      <span class="<%= bomStats.conflicts > 0 ? 'conflict-warning' : 'no-conflicts' %>">
        <%= bomStats.conflicts %>
      </span> |
      <strong>Build Files Analyzed:</strong> <%= bomStats.buildFiles %>
    </p>
  </div>

  <% if (bomStats.conflicts > 0) { %>
    <div class="alert alert-warning">
      <strong>⚠️ Version Conflicts Detected!</strong> 
      <%= bomStats.conflicts %> <%= bomStats.conflicts === 1 ? 'dependency has' : 'dependencies have' %> multiple versions. 
      Review these carefully to avoid runtime issues.
    </div>
  <% } %>

  <table class="data-table bom-table">
    <thead>
      <tr>
        <th>Dependency Name</th>
        <th>Group ID</th>
        <th>Versions</th>
        <th>Scopes</th>
        <th>Locations</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <% bomData.forEach(function(dep) { %>
        <tr class="<%= dep.hasConflict ? 'conflict-row' : '' %>">
          <td class="dep-name"><%= dep.name %></td>
          <td class="dep-group"><%= dep.groupId || 'N/A' %></td>
          <td class="dep-versions">
            <% if (dep.hasConflict) { %>
              <span class="version-conflict" title="Multiple versions detected">
                <%= dep.versions.join(', ') %>
              </span>
            <% } else { %>
              <%= dep.versions[0] %>
            <% } %>
          </td>
          <td class="dep-scopes"><%= (dep.scopes || []).join(', ') || 'compile' %></td>
          <td class="dep-locations" title="<%= dep.locations.join('\n') %>">
            <%= dep.locations.length %> <%= dep.locations.length === 1 ? 'file' : 'files' %>
          </td>
          <td class="dep-status">
            <% if (dep.hasConflict) { %>
              <span class="badge badge-warning">⚠️ Conflict</span>
            <% } else { %>
              <span class="badge badge-success">✓ OK</span>
            <% } %>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>
<% } else { %>
  <p class="no-data">No build files with dependencies were found in this project.</p>
<% } %>

<style>
  .bom-summary { margin: 1rem 0; padding: 1rem; background: #f5f5f5; border-radius: 4px; }
  .conflict-warning { color: #d9534f; font-weight: bold; }
  .no-conflicts { color: #5cb85c; font-weight: bold; }
  .alert { padding: 1rem; margin: 1rem 0; border-radius: 4px; }
  .alert-warning { background: #fff3cd; border: 1px solid #ffc107; color: #856404; }
  .conflict-row { background: #fff3cd; }
  .version-conflict { color: #d9534f; font-weight: bold; }
  .badge { padding: 0.25rem 0.5rem; border-radius: 3px; font-size: 0.85rem; }
  .badge-warning { background: #ffc107; color: #212529; }
  .badge-success { background: #28a745; color: white; }
  .dep-name { font-weight: bold; }
  .bom-table td { vertical-align: middle; }
</style>

