<html>
  <head>
    <title>Codebase Analysis Tools (CAT) Report</title>
    <style>  
      body {
        font-family: Arial, sans-serif;
        color: #333;
        background-color: #f5f5f5;
        line-height: 1.5;
        padding: 20px;
      }

      h1 {
        font-size: 2.05em;
        color: #333;
        margin-bottom: 20px;
      }

      h2 {
        font-size: 1.6em;
        color: #333;
        margin-bottom: 15px;
      }

      h3 {
        font-size: 1.4em;
        color: #333;
        margin-bottom: 10px;
      }

      p {
        font-size: 1em;
        margin-bottom: 20px;
      }

      .note-paragraph {
        font-size: 0.9em;
        font-style: italic;
        margin-bottom: 20px;
      }

      ul {
        list-style-type: disc;
        padding-left: 40px;
      }

      ul li {
        margin-bottom: 10px;
      }

      table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 20px;
        table-layout: fixed;
        word-wrap: break-word;
      }

      th, td {
        border: 1px solid #ddd;
        padding: 12px 8px;
        text-align: left;
        vertical-align: top;
        overflow: hidden;
      }

      th {
        background-color: #4CAF50;
        color: white;
        font-weight: bold;
        white-space: nowrap;
      }

      tr:nth-child(even) {
        background-color: #f9f9f9;
      }

      tr:hover {
        background-color: #f0f0f0;
      }

      /* Column type specific styling */
      .col-narrow {
        width: 8%;
        text-align: center;
      }

      .col-small {
        width: 12%;
        text-align: center;
      }

      .col-medium {
        width: 15%;
      }

      .col-wide {
        width: 25%;
      }

      .col-description {
        width: 40%;
        word-wrap: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
      }

      /* Numeric columns */
      .numeric {
        text-align: right;
        font-weight: 500;
      }

      /* Code styling in tables */
      td pre {
        margin: 0;
        padding: 2px 4px;
        background-color: #f8f8f8;
        border: 1px solid #e0e0e0;
        border-radius: 3px;
        font-size: 0.9em;
        white-space: pre-wrap;
        word-break: break-all;
      }

      td code {
        background-color: #f8f8f8;
        padding: 1px 3px;
        border-radius: 3px;
        font-size: 0.9em;
      }

      /* List styling in tables */
      td ul {
        margin: 0;
        padding-left: 20px;
      }

      td li {
        margin-bottom: 4px;
        line-height: 1.3;
      }

      /* Links in tables */
      td a {
        color: #007cba;
        text-decoration: none;
      }

      td a:hover {
        text-decoration: underline;
      }

      /* Responsive table */
      @media screen and (max-width: 1024px) {
        table {
          font-size: 0.9em;
        }
        
        th, td {
          padding: 8px 6px;
        }
        
        .col-description {
          width: 35%;
        }
      }

      @media screen and (max-width: 768px) {
        table {
          font-size: 0.8em;
        }
        
        th, td {
          padding: 6px 4px;
        }
        
        .col-narrow, .col-small {
          width: 10%;
        }
        
        .col-medium {
          width: 20%;
        }
        
        .col-description {
          width: 50%;
        }
      }
    </style>
  </head>
  <body>
    <h1>Codebase Analysis Tools (CAT) Report <a href="<%= jsonFilesConfig.jsonDataFiles.completeReport %>.json" target="_blank" style="font-size: 0.7em; margin-left: 10px; text-decoration: none; color: #007cba;">[JSON]</a></h1>
    <hr/>
    <%- include('partials/app-statistics', { appStats: appStats, jsonFilesConfig: jsonFilesConfig }) %>
    <%- include('partials/file-types-summary', { fileTypesData: fileTypesData, fileTypesPieChartPath: fileTypesPieChartPath, fileTypesTableViewModel: fileTypesTableViewModel, jsonFilesConfig: jsonFilesConfig }) %>
    <% categorizedData.forEach(category => { %>
      <%- include('partials/category-table', { category: category.category, label: category.label, data: category.data, tableViewModel: category.tableViewModel, convertToDisplayName: convertToDisplayName, jsonFilesConfig: jsonFilesConfig }) %>
    <% }); %>
    <%- include('partials/section-header', { title: 'Bill of Materials (Dependencies)', jsonFile: 'bill-of-materials.json' }) %>
    <%- include('partials/bom', { bomData: billOfMaterials, bomStats: bomStatistics }) %>
    <%- include('partials/section-header', { title: 'Code Quality Summary', jsonFile: 'code-quality-summary.json' }) %>
    <%- include('partials/code-quality', { codeQualitySummary: codeQualitySummary }) %>
    <% if (scheduledJobsSummary && scheduledJobsSummary.jobs.length > 0) { %>
      <%- include('partials/section-header', { title: 'Scheduled Jobs and Batch Processes', jsonFile: 'scheduled-jobs-summary.json' }) %>
      <%- include('partials/scheduled-jobs', { jobsData: scheduledJobsSummary, jobsStats: jobsStatistics }) %>
    <% } %>
    <% if (moduleCoupling && moduleCoupling.couplings.length > 0) { %>
      <%- include('partials/section-header', { title: 'Module Coupling Analysis', jsonFile: 'module-coupling.json' }) %>
      <%- include('partials/module-coupling', { couplingData: moduleCoupling, couplingStats: couplingStatistics }) %>
    <% } %>
    <%- include('partials/top-level-java-classes', { topLevelJavaClasses: topLevelJavaClasses, topLevelJavaClassesTableViewModel: topLevelJavaClassesTableViewModel, jsonFilesConfig: jsonFilesConfig }) %>
    <%- include('partials/integration-points', { integrationPoints: integrationPoints, integrationPointsTableViewModel: integrationPointsTableViewModel, jsonFilesConfig: jsonFilesConfig }) %>
    <%- include('partials/db-integrations', { dbInteractions: dbInteractions, procsAndTriggers: procsAndTriggers, dbInteractionsTableViewModel: dbInteractionsTableViewModel, procsAndTriggersTableViewModel: procsAndTriggersTableViewModel, convertToDisplayName: convertToDisplayName, jsonFilesConfig: jsonFilesConfig }) %>
  </body>
</html> 